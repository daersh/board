<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê²Œì‹œê¸€ ìˆ˜ì • âœ¨</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; padding: 20px; background-color: #f9f9f9; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        h2 { color: #ff69b4; text-align: center; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #555; }
        input[type="text"], textarea {
            width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 10px;
            box-sizing: border-box; font-size: 16px;
        }
        input:focus, textarea:focus { outline: none; border-color: #ff69b4; }
        .btn-group { display: flex; gap: 10px; margin-top: 30px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 16px; }
        .btn-save { background: #ff69b4; color: white; }
        .btn-cancel { background: #eee; color: #666; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ€ ê²Œì‹œê¸€ ìˆ˜ì •í•˜ê¸° ğŸ€</h2>

    <div class="form-group">
        <label>ì œëª©</label>
        <input type="text" id="title" placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš” âœ¨">
    </div>

    <div class="form-group">
        <label>ë‚´ìš©</label>
        <textarea id="content" rows="12" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš” ğŸ’–"></textarea>
    </div>

    <div class="btn-group">
        <button class="btn btn-cancel" onclick="history.back()">ì·¨ì†Œ</button>
        <button class="btn btn-save" onclick="updateBoard()">ìˆ˜ì • ì™„ë£Œ ğŸš€</button>
    </div>
</div>

<script>
    // 1. URLì—ì„œ ID êº¼ë‚´ê¸° âœ¨
    const urlParams = new URLSearchParams(window.location.search);
    const boardId = urlParams.get('id');

    // 2. í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ì¡´ ë°ì´í„° ë¶ˆëŸ¬ì™€ì„œ ì±„ì›Œì£¼ê¸° ğŸ’
    document.addEventListener('DOMContentLoaded', () => {
        if (!boardId) {
            alert("ì˜ëª»ëœ ì ‘ê·¼ì´ì—ìš”! ğŸ™…â€â™€ï¸");
            location.href = "/board";
            return;
        }

        fetch(`/api/board/${boardId}`)
            .then(res => res.json())
            .then(data => {
                document.getElementById('title').value = data.title;
                document.getElementById('content').value = data.content;
            })
            .catch(err => console.error("ë°ì´í„° ë¡œë”© ì‹¤íŒ¨ ã… ã… ", err));
    });

    // 3. ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì‹œ API í˜¸ì¶œ! ğŸ’–
    function updateBoard() {
        const title = document.getElementById('title').value;
        const content = document.getElementById('content').value;

        if (!title.trim() || !content.trim()) {
            alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”! âœ¨");
            return;
        }

        const requestData = {
            id: boardId, // DTOì— UUID id í•„ë“œê°€ ìˆìœ¼ë‹ˆê¹Œ ê¼­ ë„£ì–´ì¤˜ì•¼ í•´! âœ¨
            title: title,
            content: content
        };

        fetch('/api/board', {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(