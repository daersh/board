name: Gemini AI Code Review

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  review:
    runs-on: ubuntu-latest
    # 중요: PR에 댓글을 쓸 수 있는 권한을 명시적으로 부여합니다.
    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Gemini AI Reviewer
        # 다른 버전인 google-gemini/gemini-github-action 등을 시도해볼 수 있습니다.
        # 여기서는 가장 많이 쓰이는 구조로 예시를 듭니다.
        uses: google-gemini/ai-pr-reviewer@v0.1.0 
        with:
          gemini_api_key: ${{ secrets.GEMINI_API_KEY }}
          github_token: ${{ secrets.GITHUB_TOKEN }}
          system_message: "당신은 한국인 시니어 개발자입니다. 코드를 리뷰하고 한국어로 피드백을 주세요."